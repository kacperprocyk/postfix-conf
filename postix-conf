#Mailutils with Postfix

#Log in google account, go to Security page and turn on 2FA (if needed) and search for App Passwords (TIP: use search bar), create a name for your app and copy generated app password. 

#In terminal:
sudo su
apt update
apt install mailutils
apt install postfix

#choose Internet Site option and set domain

#open Postfix configure file:
vi /etc/postfix/main.cf

#modify or add lines:
	myhostname = localhost
	relayhost = [smtp.server.com]:587 #use domain of your choose, ex. [smtp.gmail.com]
	myorigin = /etc/mailname #domain info
	smtp_sasl_auth_enable = yes 
	smtp_sasl_security_options = noanynomous
	smtp_sasl_tls_security_options = noanonymous
	smtp_sasl_password_maps = hash:/etc/postfix/sasl/sasl_passwd
	smtp_use_tls = yes
	smtp_tls_security_level = encrypt

#create sasl_passwd file
vi /etc/postfix/sasl_passwd
add:
[smtp.server.com]:587 username:password
username: mail account
password: 16 digit app password generated by google

something like this: [smtp.gmail.com]:587 youraccount@mail.com:hhqqlliiyyttppfd

#save and quit to the terminal 

#set security policy
chmod 600 /etc/postfix/sasl_passwd

#create database of sasl_passwd file (for postfix efficiency)
postmap /etc/postfix/sasl_passwd

#and finaly restart the service
systemctl restart postfix 

#check service status 
systemctl status postfix

#test by sending an email
echo "message" | mail -s "subject" youraccount@mail.com
